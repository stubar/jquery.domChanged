(function($){$.fn.domChanged=function(options){return this.each(function(){var domChanged=new DomChanged(this,options);$(this).data("domChanged",domChanged)})};var DomChanged=function(element,options){var defaults={pollTime:100,callback:false,eventName:"domChanged",timeout:0};var settings;if(typeof options=="function"){settings=defaults;settings.callback=options}else{settings=$.extend(defaults,options)}var MutationObserver=window.MutationObserver||window.WebKitMutationObserver;if(MutationObserver){var observer=new MutationObserver(function(mutationRecords){changeDetected()});observer.observe(element,{subtree:true,childList:true,attribute:true,characterData:true})}else{if(typeof element.onpropertychange=="object"){element.attachEvent("onpropertychange",function(e){changeDetected()})}var allChildrenCount=0,timer=0;var interval=setInterval(function(){var allChildren=element.getElementsByTagName("*");if(allChildren.length!=allChildrenCount){allChildrenCount=allChildren.length;changeDetected()}if(timer>settings.timeout){clearInterval(interval)}else{timer+=settings.pollTime}},settings.pollTime)}this.stop=function(){if(MutationObserver){observer.disconnect()}if(typeof interval!="undefined"){clearInterval(interval)}};var changeDetected=function(){$(element).trigger(settings.eventName);if(typeof settings.callback=="function"){settings.callback.call()}}}})(jQuery);